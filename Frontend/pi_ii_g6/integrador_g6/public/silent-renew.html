<!DOCTYPE html>
<html lang="en">
<head>
    <title>Silent Renew</title>
</head>
<body>
    <script src="oidc-client.min.js"></script>
    <script>
        const settings = {
            // authority: "http://localhost:8080/realms/ticketrek",
            authority: "http://54.211.227.50:8080/realms/ticketrek",
            client_id: "frontend-ticketrek",
            redirect_uri: "http://localhost:5173/signin-callback.html",
            post_logout_redirect_uri: "http://localhost:5173/signout-callback.html",
            silent_redirect_uri: "http://localhost:5173/silent-renew.html",
            response_type: 'code',
            scope: "openid profile",
            automaticSilentRenew: true,
            filterProtocolClaims: true,
            loadUserInfo: true,
            // issuer: "http://localhost:8080/realms/ticketrek",
            // authorization_endpoint: "http://localhost:8080/realms/ticketrek/protocol/openid-connect/auth",
            // userinfo_endpoint: "http://localhost:8080/realms/ticketrek/protocol/openid-connect/userinfo",
            // end_session_endpoint: "http://localhost:8080/realms/ticketrek/protocol/openid-connect/logout",
            // jwks_uri: "http://localhost:8080/realms/ticketrek/protocol/openid-connect/certs",
            issuer: "http://54.211.227.50:8080/realms/ticketrek",
            authorization_endpoint: "http://54.211.227.50:8080/realms/ticketrek/protocol/openid-connect/auth",
            userinfo_endpoint: "http://54.211.227.50:8080/realms/ticketrek/protocol/openid-connect/userinfo",
            end_session_endpoint: "http://54.211.227.50:8080/realms/ticketrek/protocol/openid-connect/logout",
            jwks_uri: "http://54.211.227.50:8080/realms/ticketrek/protocol/openid-connect/certs",
            response_mode: "query"
        };

        new Oidc.UserManager(settings).signinSilentCallback().catch(function (e) {
            console.error("Silent renew error", e);
        });
    </script>
</body>
</html>
